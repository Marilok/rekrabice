import {
  MapContainer,
  TileLayer,
  useMap,
  Popup,
  Marker,
  Polygon,
} from "react-leaflet";
import "leaflet/dist/leaflet.css";
import "leaflet-defaulticon-compatibility/dist/leaflet-defaulticon-compatibility.css";
import "leaflet-defaulticon-compatibility";
import L from "leaflet";
import {
  Popover,
  Text,
  Button,
  Paper,
  Title,
  Avatar,
  useMantineTheme,
  MantineTheme,
  Group,
} from "@mantine/core";

import { IconExternalLink } from "@tabler/icons";

const myIcon = new L.Icon({
  iconUrl: "/map_marker.svg",
  shadowUrl: "/map_marker_filled.svg",
  popupAnchor: [0, -10],
  iconSize: [32, 32],
  shadowSize: [42, 42],
});
const CustomMap = () => {
  const theme = useMantineTheme();

  return (
    <MapContainer
      id="map"
      className={"w-full h-80	"}
      center={[49.1918183, 16.6122742]}
      zoom={13}
    >
      <TileLayer
        attribution='&copy; <a href="https://www.seznam.cz/">Seznam.cz</a> &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        url="https://m1.mapserver.mapy.cz/base-m/{z}-{x}-{y}"
        //TODO: fix subdomail to support 1,2,3,4
        //m{s}.mapserver.mapy.cz/base-m/{z}-{x}-{y}
      />

      <Marker icon={myIcon} position={[49.1918183, 16.6122742]}>
        <Popup style={{ backgroundColor: theme.colors.gray[7] }}>
          <Paper className="w-80 h-full" shadow="xl" p="sm">
            <Group>
              <Title order={1}>Aktin - Letmo</Title>
              <Avatar radius="xl" size="lg" />
            </Group>
            {/* <Text>Po-Pá: 8-18h</Text> */}
            <Button
              component="a"
              href="https://mapy.cz/zakladni?x=16.6122742&y=49.1918183&z=17&source=firm&id=13078566"
              variant="outline"
              target={"_blank"}
              rightIcon={<IconExternalLink size={14} />}
              mt={"sm"}
            >
              Detail pobočky
            </Button>
          </Paper>
        </Popup>
      </Marker>
      <Polygon pathOptions={{ color: "green" }} positions={heartData} />
    </MapContainer>
  );
};
export default CustomMap;

const heartData = [
  {
    lng: 16.60878173861164,
    lat: 49.19428118670652,
  },
  {
    lng: 16.608751625357627,
    lat: 49.19429002785478,
  },
  {
    lng: 16.608721512081047,
    lat: 49.19429886900147,
  },
  {
    lng: 16.60869139939453,
    lat: 49.194307710146575,
  },
  {
    lng: 16.608661286140602,
    lat: 49.194316551290086,
  },
  {
    lng: 16.608631172886618,
    lat: 49.194325392432006,
  },
  {
    lng: 16.608601059609924,
    lat: 49.19433423357236,
  },
  {
    lng: 16.608570946355968,
    lat: 49.19434307471113,
  },
  {
    lng: 16.60854083366945,
    lat: 49.194351915944765,
  },
  {
    lng: 16.608510720415524,
    lat: 49.194360757080375,
  },
  {
    lng: 16.608480607138887,
    lat: 49.194369598214394,
  },
  {
    lng: 16.608450789623447,
    lat: 49.194378840357444,
  },
  {
    lng: 16.6084214425247,
    lat: 49.19438872009542,
  },
  {
    lng: 16.608392094881168,
    lat: 49.1943985998314,
  },
  {
    lng: 16.608362747237663,
    lat: 49.194408479565425,
  },
  {
    lng: 16.60833340013889,
    lat: 49.194418359297515,
  },
  {
    lng: 16.608304052495356,
    lat: 49.19442823893115,
  },
  {
    lng: 16.608274704851823,
    lat: 49.194438118659264,
  },
  {
    lng: 16.608245357775814,
    lat: 49.194447998385385,
  },
  {
    lng: 16.60821601013231,
    lat: 49.194457878109546,
  },
  {
    lng: 16.608186662466096,
    lat: 49.19446775782433,
  },
  {
    lng: 16.60815731539003,
    lat: 49.19447763745555,
  },
  {
    lng: 16.608127967746498,
    lat: 49.1944875171738,
  },
  {
    lng: 16.60809862010302,
    lat: 49.19449739689003,
  },
  {
    lng: 16.608069273004304,
    lat: 49.194507276604355,
  },
  {
    lng: 16.60803992536077,
    lat: 49.194517156309246,
  },
  {
    lng: 16.608010578284677,
    lat: 49.19452703601959,
  },
  {
    lng: 16.607981230618492,
    lat: 49.19453691572798,
  },
  {
    lng: 16.60795188297496,
    lat: 49.19454679534536,
  },
  {
    lng: 16.60792253589898,
    lat: 49.19455667504238,
  },
  {
    lng: 16.607893188255446,
    lat: 49.194566554744824,
  },
  {
    lng: 16.607863840589232,
    lat: 49.19457643444531,
  },
  {
    lng: 16.607835055003193,
    lat: 49.19458697418227,
  },
  {
    lng: 16.607806725714397,
    lat: 49.19459805035572,
  },
  {
    lng: 16.607778395858105,
    lat: 49.19460912651928,
  },
  {
    lng: 16.60775006659199,
    lat: 49.194620202591324,
  },
  {
    lng: 16.60772173673564,
    lat: 49.194631278757356,
  },
  {
    lng: 16.60769340744693,
    lat: 49.19464235492089,
  },
  {
    lng: 16.60766507815802,
    lat: 49.19465343107453,
  },
  {
    lng: 16.607636748301843,
    lat: 49.19466450713665,
  },
  {
    lng: 16.607608419035643,
    lat: 49.194675583292735,
  },
  {
    lng: 16.607580089746904,
    lat: 49.19468665944635,
  },
  {
    lng: 16.607551759890555,
    lat: 49.19469773550105,
  },
  {
    lng: 16.607523430601816,
    lat: 49.1947088116423,
  },
  {
    lng: 16.607495101312935,
    lat: 49.194719887788466,
  },
  {
    lng: 16.60746677147938,
    lat: 49.19473096392471,
  },
  {
    lng: 16.607438442190585,
    lat: 49.194742039976944,
  },
  {
    lng: 16.607410112334293,
    lat: 49.19475311610822,
  },
  {
    lng: 16.607381783045497,
    lat: 49.194764192148085,
  },
  {
    lng: 16.607353453211857,
    lat: 49.19477526828183,
  },
  {
    lng: 16.607325124490615,
    lat: 49.19478634441313,
  },
  {
    lng: 16.607297935706384,
    lat: 49.19479848518205,
  },
  {
    lng: 16.607272313192283,
    lat: 49.19481208920655,
  },
  {
    lng: 16.607246691813174,
    lat: 49.19482569313831,
  },
  {
    lng: 16.607221070434036,
    lat: 49.19483929715537,
  },
  {
    lng: 16.60719544905487,
    lat: 49.194852901079656,
  },
  {
    lng: 16.607169826563478,
    lat: 49.19486650500019,
  },
  {
    lng: 16.607144205184312,
    lat: 49.19488010890959,
  },
  {
    lng: 16.60711858380523,
    lat: 49.19489371291908,
  },
  {
    lng: 16.607092962426037,
    lat: 49.194907316820974,
  },
  {
    lng: 16.607069484084263,
    lat: 49.19492243460368,
  },
  {
    lng: 16.607046746473372,
    lat: 49.194938075228634,
  },
  {
    lng: 16.60702400997488,
    lat: 49.19495371584867,
  },
  {
    lng: 16.607001272364073,
    lat: 49.19496935637474,
  },
  {
    lng: 16.606981762316423,
    lat: 49.194986728225615,
  },
  {
    lng: 16.60696272495551,
    lat: 49.19500435280807,
  },
  {
    lng: 16.60694368759465,
    lat: 49.19502197748062,
  },
  {
    lng: 16.606931744303324,
    lat: 49.19504205566986,
  },
  {
    lng: 16.60692015270655,
    lat: 49.195062255328025,
  },
  {
    lng: 16.606908561132485,
    lat: 49.19508245498537,
  },
  {
    lng: 16.606898996075472,
    lat: 49.1951030198814,
  },
  {
    lng: 16.606893090589665,
    lat: 49.195124245081985,
  },
  {
    lng: 16.606887185103773,
    lat: 49.1951454702735,
  },
  {
    lng: 16.6068812795952,
    lat: 49.1951666955523,
  },
  {
    lng: 16.606875374109364,
    lat: 49.195187920629195,
  },
  {
    lng: 16.60687267695957,
    lat: 49.19520936583555,
  },
  {
    lng: 16.606871706638515,
    lat: 49.195230929735345,
  },
  {
    lng: 16.60687073634017,
    lat: 49.19525249348479,
  },
  {
    lng: 16.606869764906804,
    lat: 49.19527405736579,
  },
  {
    lng: 16.606868794608488,
    lat: 49.19529562105194,
  },
  {
    lng: 16.60687250391578,
    lat: 49.19531702699766,
  },
  {
    lng: 16.606876866876064,
    lat: 49.19533841075713,
  },
  {
    lng: 16.606881229836347,
    lat: 49.195359794514786,
  },
  {
    lng: 16.606885592819282,
    lat: 49.19538117844118,
  },
  {
    lng: 16.606896516053382,
    lat: 49.1954012450401,
  },
  {
    lng: 16.606911280914403,
    lat: 49.195420540652094,
  },
  {
    lng: 16.606926043505354,
    lat: 49.1954398360711,
  },
  {
    lng: 16.606940808366375,
    lat: 49.19545913166803,
  },
  {
    lng: 16.606956773093117,
    lat: 49.195477941731326,
  },
  {
    lng: 16.606976580581716,
    lat: 49.195495200078824,
  },
  {
    lng: 16.606996388070456,
    lat: 49.19551245855385,
  },
  {
    lng: 16.607016195559112,
    lat: 49.195529716889325,
  },
  {
    lng: 16.60703600418279,
    lat: 49.19554697535969,
  },
  {
    lng: 16.607058120919845,
    lat: 49.19556268904503,
  },
  {
    lng: 16.607084984023885,
    lat: 49.195575228132185,
  },
  {
    lng: 16.607111848240237,
    lat: 49.19558776713458,
  },
  {
    lng: 16.607138711321596,
    lat: 49.19560030610407,
  },
  {
    lng: 16.607165574425693,
    lat: 49.19561284518167,
  },
  {
    lng: 16.60719425597651,
    lat: 49.19562324223193,
  },
  {
    lng: 16.607224760514242,
    lat: 49.19563149071439,
  },
  {
    lng: 16.607255265074684,
    lat: 49.19563973914356,
  },
  {
    lng: 16.607285768477396,
    lat: 49.195647987645515,
  },
  {
    lng: 16.607316373667913,
    lat: 49.19565605411805,
  },
  {
    lng: 16.607347926547362,
    lat: 49.19566239841356,
  },
  {
    lng: 16.607379478859286,
    lat: 49.195668742723086,
  },
  {
    lng: 16.60741103173868,
    lat: 49.1956750869947,
  },
  {
    lng: 16.60744299117917,
    lat: 49.195679663713236,
  },
  {
    lng: 16.607476004023482,
    lat: 49.195679663713236,
  },
  {
    lng: 16.607509016890504,
    lat: 49.195679663713236,
  },
  {
    lng: 16.607542029734873,
    lat: 49.195679663713236,
  },
  {
    lng: 16.607575019402248,
    lat: 49.19567945252899,
  },
  {
    lng: 16.607607699779095,
    lat: 49.195676401665224,
  },
  {
    lng: 16.607640308355144,
    lat: 49.19567312278042,
  },
  {
    lng: 16.60767213263844,
    lat: 49.195667385886736,
  },
  {
    lng: 16.60770395635427,
    lat: 49.19566164903685,
  },
  {
    lng: 16.607735780660278,
    lat: 49.19565591214183,
  },
  {
    lng: 16.60776760437608,
    lat: 49.19565017529061,
  },
  {
    lng: 16.607797960204664,
    lat: 49.1956417712025,
  },
  {
    lng: 16.60782808421851,
    lat: 49.19563294669487,
  },
  {
    lng: 16.607858208777202,
    lat: 49.19562412217823,
  },
  {
    lng: 16.607888333358574,
    lat: 49.19561529760068,
  },
  {
    lng: 16.607915805418855,
    lat: 49.19560393182792,
  },
  {
    lng: 16.607939374243756,
    lat: 49.19558882617264,
  },
  {
    lng: 16.607962943046005,
    lat: 49.1955737206537,
  },
  {
    lng: 16.60798651243843,
    lat: 49.19555861501888,
  },
  {
    lng: 16.60801008126336,
    lat: 49.19554350948329,
  },
  {
    lng: 16.60803365006555,
    lat: 49.19552840392822,
  },
  {
    lng: 16.608057219457976,
    lat: 49.19551329827959,
  },
  {
    lng: 16.608080788260196,
    lat: 49.195498192737574,
  },
  {
    lng: 16.608104357652564,
    lat: 49.195483087050036,
  },
  {
    lng: 16.60812792645487,
    lat: 49.195467981476554,
  },
  {
    lng: 16.608148291483644,
    lat: 49.19545958370645,
  },
  {
    lng: 16.608154526054676,
    lat: 49.1954807684796,
  },
  {
    lng: 16.608160760080835,
    lat: 49.19550195324365,
  },
  {
    lng: 16.608166994651896,
    lat: 49.19552313816186,
  },
  {
    lng: 16.60817445115319,
    lat: 49.19554413545001,
  },
  {
    lng: 16.60818328678394,
    lat: 49.19556492149269,
  },
  {
    lng: 16.608192122391955,
    lat: 49.19558570736345,
  },
  {
    lng: 16.608200958022707,
    lat: 49.19560649340346,
  },
  {
    lng: 16.608209793630692,
    lat: 49.195627279234515,
  },
  {
    lng: 16.608219976701292,
    lat: 49.19564772615169,
  },
  {
    lng: 16.608234740427264,
    lat: 49.19566702167489,
  },
  {
    lng: 16.608249504175944,
    lat: 49.19568631702006,
  },
  {
    lng: 16.608264267901973,
    lat: 49.195705612506,
  },
  {
    lng: 16.608279031628,
    lat: 49.1957249078435,
  },
  {
    lng: 16.6082982114782,
    lat: 49.19574240125306,
  },
  {
    lng: 16.608318265491278,
    lat: 49.19575953793648,
  },
  {
    lng: 16.60833831893683,
    lat: 49.195776674309855,
  },
  {
    lng: 16.608363245961527,
    lat: 49.19579067520024,
  },
  {
    lng: 16.608389157404133,
    lat: 49.195804042773005,
  },
  {
    lng: 16.608415067711718,
    lat: 49.19581741011223,
  },
  {
    lng: 16.608441918943583,
    lat: 49.19582990156229,
  },
  {
    lng: 16.608469988678024,
    lat: 49.19584125658784,
  },
  {
    lng: 16.608498058435146,
    lat: 49.195852611610775,
  },
  {
    lng: 16.60852612760212,
    lat: 49.19586396643825,
  },
  {
    lng: 16.60855771101336,
    lat: 49.19587016680305,
  },
  {
    lng: 16.608589403567237,
    lat: 49.19587620722754,
  },
  {
    lng: 16.608621094986148,
    lat: 49.19588224754742,
  },
  {
    lng: 16.608653338815003,
    lat: 49.19588637298361,
  },
  {
    lng: 16.6086862238798,
    lat: 49.195888269109105,
  },
  {
    lng: 16.60871910894454,
    lat: 49.19589016523449,
  },
  {
    lng: 16.608751993441786,
    lat: 49.19589206133014,
  },
  {
    lng: 16.608784878506526,
    lat: 49.1958939574628,
  },
  {
    lng: 16.60881757811049,
    lat: 49.19589231361084,
  },
  {
    lng: 16.60885018609639,
    lat: 49.195888949096656,
  },
  {
    lng: 16.60888279523985,
    lat: 49.195885584530316,
  },
  {
    lng: 16.60891449060867,
    lat: 49.195879568390126,
  },
  {
    lng: 16.60894616223294,
    lat: 49.19587348123173,
  },
  {
    lng: 16.608976990203473,
    lat: 49.19586593275881,
  },
  {
    lng: 16.60900693327386,
    lat: 49.195856848148225,
  },
  {
    lng: 16.60903687575407,
    lat: 49.19584776352863,
  },
  {
    lng: 16.609066818256906,
    lat: 49.195838679070505,
  },
  {
    lng: 16.60909659225601,
    lat: 49.19582937730817,
  },
  {
    lng: 16.60912545023305,
    lat: 49.19581890055389,
  },
  {
    lng: 16.60915182137788,
    lat: 49.19580605200315,
  },
  {
    lng: 16.609177182090377,
    lat: 49.19579224155558,
  },
  {
    lng: 16.60920254278011,
    lat: 49.19577843086677,
  },
  {
    lng: 16.60922790406005,
    lat: 49.19576462017412,
  },
  {
    lng: 16.609250862203567,
    lat: 49.1957494134447,
  },
  {
    lng: 16.6092688964643,
    lat: 49.195731343663255,
  },
  {
    lng: 16.609286930134772,
    lat: 49.1957132738826,
  },
  {
    lng: 16.60930496382798,
    lat: 49.19569520409539,
  },
  {
    lng: 16.60931802331197,
    lat: 49.19567574290218,
  },
  {
    lng: 16.609325584415956,
    lat: 49.195654743333534,
  },
  {
    lng: 16.60933314554262,
    lat: 49.19563374377816,
  },
  {
    lng: 16.609340706646606,
    lat: 49.195612744540256,
  },
  {
    lng: 16.60934826775059,
    lat: 49.19559174494486,
  },
  {
    lng: 16.609354782238,
    lat: 49.19557060463234,
  },
  {
    lng: 16.609360519220132,
    lat: 49.195549359834644,
  },
  {
    lng: 16.609365602549275,
    lat: 49.195528068604716,
  },
  {
    lng: 16.60936703652243,
    lat: 49.195506515878435,
  },
  {
    lng: 16.609368470495497,
    lat: 49.195484963113046,
  },
  {
    lng: 16.60936990444594,
    lat: 49.19546341070915,
  },
  {
    lng: 16.609367622324385,
    lat: 49.19544190099572,
  },
  {
    lng: 16.609365024102146,
    lat: 49.19542039478861,
  },
  {
    lng: 16.609362425902674,
    lat: 49.19539888856477,
  },
  {
    lng: 16.60935982768052,
    lat: 49.19537738270981,
  },
  {
    lng: 16.60935722948105,
    lat: 49.19535587646723,
  },
  {
    lng: 16.609352354222096,
    lat: 49.195334579405795,
  },
  {
    lng: 16.6093457826436,
    lat: 49.19531343831582,
  },
  {
    lng: 16.609339211042396,
    lat: 49.19529229683852,
  },
  {
    lng: 16.609332639463844,
    lat: 49.19527115540413,
  },
  {
    lng: 16.60932606788529,
    lat: 49.195250013916194,
  },
  {
    lng: 16.60931949685164,
    lat: 49.195228872790125,
  },
  {
    lng: 16.609312925273088,
    lat: 49.195207731321176,
  },
  {
    lng: 16.609306353694592,
    lat: 49.195186589806156,
  },
  {
    lng: 16.60929978211601,
    lat: 49.195165448652915,
  },
  {
    lng: 16.609292293380435,
    lat: 49.195144450899875,
  },
  {
    lng: 16.609283483196634,
    lat: 49.195123660059664,
  },
  {
    lng: 16.609274672468075,
    lat: 49.195102869262655,
  },
  {
    lng: 16.609265862284275,
    lat: 49.19508207882771,
  },
  {
    lng: 16.609257051533035,
    lat: 49.19506128796135,
  },
  {
    lng: 16.609248241371915,
    lat: 49.19504049709357,
  },
  {
    lng: 16.609239430620676,
    lat: 49.19501970630611,
  },
  {
    lng: 16.60923062045964,
    lat: 49.19499891578431,
  },
  {
    lng: 16.60922181027584,
    lat: 49.194978124882965,
  },
  {
    lng: 16.60921299954728,
    lat: 49.19495733406927,
  },
  {
    lng: 16.60920176472996,
    lat: 49.19493705261689,
  },
  {
    lng: 16.60919039141848,
    lat: 49.194916799882634,
  },
  {
    lng: 16.609179018084433,
    lat: 49.194896547140104,
  },
  {
    lng: 16.609167645317797,
    lat: 49.19487629447829,
  },
  {
    lng: 16.609156271983693,
    lat: 49.19485604209001,
  },
  {
    lng: 16.609144899217085,
    lat: 49.19483578932261,
  },
  {
    lng: 16.60913352588298,
    lat: 49.194815536539494,
  },
  {
    lng: 16.609122152548906,
    lat: 49.19479528412634,
  },
  {
    lng: 16.6091107797823,
    lat: 49.194775031334046,
  },
  {
    lng: 16.609099406470904,
    lat: 49.19475477853348,
  },
  {
    lng: 16.6090880331368,
    lat: 49.1947345258136,
  },
  {
    lng: 16.609076660370192,
    lat: 49.19471427336731,
  },
  {
    lng: 16.60906528703603,
    lat: 49.194694020541874,
  },
  {
    lng: 16.609053913701928,
    lat: 49.19467376770811,
  },
  {
    lng: 16.60904254093535,
    lat: 49.19465351522953,
  },
  {
    lng: 16.609031167601245,
    lat: 49.194633262475634,
  },
  {
    lng: 16.60901858931655,
    lat: 49.19461332554346,
  },
  {
    lng: 16.609005375470986,
    lat: 49.19459355563029,
  },
  {
    lng: 16.60899216162551,
    lat: 49.19457378607268,
  },
  {
    lng: 16.608978947779946,
    lat: 49.194554016136294,
  },
  {
    lng: 16.608965733911674,
    lat: 49.194534246199424,
  },
  {
    lng: 16.60895252006617,
    lat: 49.19451447652909,
  },
  {
    lng: 16.608939306220634,
    lat: 49.19449470656906,
  },
  {
    lng: 16.6089260923751,
    lat: 49.19447493660107,
  },
  {
    lng: 16.608912878529566,
    lat: 49.19445516663259,
  },
  {
    lng: 16.60889966468406,
    lat: 49.194435396930686,
  },
  {
    lng: 16.608886450815817,
    lat: 49.19441562693899,
  },
  {
    lng: 16.608873236970283,
    lat: 49.194395856939394,
  },
  {
    lng: 16.60886002312469,
    lat: 49.19437608731019,
  },
  {
    lng: 16.608845868377614,
    lat: 49.1943566213109,
  },
  {
    lng: 16.608829835799924,
    lat: 49.194337762601975,
  },
  {
    lng: 16.608813803199524,
    lat: 49.19431890388586,
  },
  {
    lng: 16.60879777118933,
    lat: 49.194300045526006,
  },
  {
    lng: 16.60878173861164,
    lat: 49.19428118670652,
  },
];
